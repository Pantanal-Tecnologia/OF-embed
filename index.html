<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TESTE</title>
  <link rel="stylesheet" href="index.css">
  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Pantanal-Tecnologia/OF-embed@main/dist/of-validation.css"> -->
</head>
<body>
  <div>TESTE</div>
  <button id="getTransacoes" disabled>getTransacoes</button>
  <button id="ValidaTransacoes" disabled>ValidaTransacoes</button>
  <script src="index.js"></script>
  <!-- <script src="https://cdn.jsdelivr.net/gh/Pantanal-Tecnologia/OF-embed@main/dist/of-validation-min.js"></script> -->
  <script>
    document.addEventListener("DOMContentLoaded", function() {
        // let devMode = false
      SISTEMA = "GTM" 
      LAYOUT = "C"
      TOKEN = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJrZXkiOjUzNzQsImxhYmVsIjoiTUFSQ09TIEJBUkJPU0EgSk9BUVVJTSIsInRlbGVmb25lIjoiIiwibm9tZSI6Ik1BUkNPUyBCQVJCT1NBIEpPQVFVSU0iLCJlbWFpbCI6Im1hcmNvcy5qb2FxdWltQGp1bWFzYS5jb20uYnIiLCJpZCI6NTM3NCwiZm9ybmVjZWRvciI6MjgxNCwidGlwbyI6IkZPUk5FQ0VET1IiLCJBUEkiOnRydWUsImlhdCI6MTY5ODg0MjkzOCwiZXhwIjoxNjk4ODg2MTM4fQ._Qt9lBPSRIIfKQ-rDzEv6Gswfj3cNx0eoqXTk2XgMjM"
      TRANSACOES = ["21010566"] // [1,2,3,4,77,7]
      const embed = new OfEmbed()
        embed.setDevMode(true)
        embed.setToken(TOKEN)
        embed.setSistema(SISTEMA)

      const validaTransacoes = () => {
        const callback = () =>  {
          // Fazer chamadas de execução
          alert('Orçamento Executado')
        }
        embed.validacaoFornecedor(LAYOUT, TRANSACOES, callback)
      }

      const getTransacoes = () => {
        const callback = () =>  {
          // Fazer chamadas de execução
          alert('Orçamento Executado')
        }
        embed.getTransacoesDocStatus(LAYOUT,TRANSACOES).then(async(result) => {
          const code = document.createElement('code')
          code.innerText = JSON.stringify(result)
          document.body.append(code)
          for (const key in result) {
            if (Object.hasOwnProperty.call(result, key)) {
              const transacoes = result[key].filter(el = el === false);
            }
          }
        })
      }

      const button = document.getElementById('ValidaTransacoes')
      const button2 = document.getElementById('getTransacoes')
      button.onclick = validaTransacoes
      button2.onclick = getTransacoes
      button.disabled = false
      button2.disabled = false
    });
    

  </script>
</body>
</html>